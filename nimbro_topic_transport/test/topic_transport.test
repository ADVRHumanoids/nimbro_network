<?xml version="1" ?>
<launch>
	<arg name="fec" default="false" />
	<arg name="port" default="5777" />

	<node name="sender" pkg="nimbro_topic_transport" type="sender" output="screen">
		<!-- Destination: localhost -->
		<param name="destination_addr" value="127.0.0.1" />
		<param name="port" value="$(arg port)" />

		<param if="$(arg fec)" name="fec" value="0.5" />

		<!-- Load topics from yaml file -->
		<rosparam command="load" file="$(find nimbro_topic_transport)/test/topics.yaml" />
	</node>

	<node name="receiver" pkg="nimbro_topic_transport" type="receiver" output="screen">
		<param name="port" value="$(arg port)" />
		<remap from="/udp/test_topic" to="/udp/receive/test_topic" />
		<remap from="/udp/array_topic" to="/udp/receive/array_topic" />

		<remap from="/tcp/test_topic" to="/tcp/receive/test_topic" />
		<remap from="/tcp/array_topic" to="/tcp/receive/array_topic" />

		<param name="fec" value="$(arg fec)" />
	</node>

	<test test-name="udp" pkg="nimbro_topic_transport" type="test_comm">
	</test>

	<test test-name="tcp" pkg="nimbro_topic_transport" type="test_comm">
	</test>
</launch>
